cmake_minimum_required(VERSION 2.8)
project(soundtracker)
if (WIN32)
  link_directories(${PROJECT_SOURCE_DIR}/allegro/lib ${PROJECT_SOURCE_DIR}/sdl/lib)
  include_directories(${PROJECT_SOURCE_DIR}/allegro/include ${PROJECT_SOURCE_DIR}/sdl/include)
endif (WIN32)
if (APPLE)
  find_library(HAVE_APPKIT AppKit PATHS ${CMAKE_OSX_SYSROOT}/System/Library PATH_SUFFIXES Frameworks NO_DEFAULT_PATH)
else (APPLE)
  find_library(HAVE_JACK jack)
endif (APPLE)
find_library(HAVE_SDL2 SDL2)
find_library(HAVE_SDL2_TTF SDL2_ttf)
add_executable(ssinter src/soundchip.cpp src/ssinter.cpp src/ssmain.cpp)
add_executable(ssbench src/soundchip.cpp src/ssinter.cpp src/ssbench.cpp)
set(TRACKER_SRC src/soundchip.cpp
                src/graphics.cpp
                src/ssinter.cpp
                src/fextra.cpp
                src/main.cpp)
if (APPLE)
list(APPEND TRACKER_SRC src/nsstub.m)
endif (APPLE)
add_executable(soundtracker ${TRACKER_SRC})
target_link_libraries(ssinter ${HAVE_SDL2})
target_link_libraries(soundtracker ${HAVE_SDL2} ${HAVE_SDL2_TTF})
if (WIN32)
  target_link_libraries(soundtracker SDL2main)
endif (WIN32)
if (HAVE_JACK)
  target_compile_definitions(soundtracker PUBLIC JACK)
  target_link_libraries(soundtracker jack)
  target_compile_definitions(ssinter PUBLIC JACK)
  target_link_libraries(ssinter jack)
endif ()
if (APPLE)
  target_link_libraries(soundtracker ${HAVE_APPKIT})
else ()
  target_link_libraries(soundtracker X11)
endif ()
